(function($){var isMobile=/iPhone|iPod|Android/i.test(navigator.userAgent),constants={hasLargeText:'hasLargeText',expanded:'expanded',overflow:'overflow'},selectors={collapseExpandIcon:'.collapseExpandIcon',captionTitleContainer:'.captionTitleContainer',navigationContainer:'.navigationIconsTopMostWrapper > div',navigationIconsTopMostWrapper:'.navigationIconsTopMostWrapper',swiper:'.swiper.preview',slide:'.wbSlideContainer',imageContainer:'.wbSlideContainer .imageContainer',slideWrapper:'.swiper-wrapper',paginationInner:'.pagination-inner',swiperPagination:'.navigationIconsTopMostWrapper .swiper-pagination'},navigationDotsBottomOffset=14,focusFromMouse=false;function addClass(container,name){container&&container.classList.add(name)};function removeClass(container,name){container&&container.classList.remove(name)};function adjustNavigationDots(swiper){if(!swiper||swiper.destroyed)return;const $slider=$(swiper.el);if(!isMobile&&$slider.data('captiontop'))return;var bottom=0;var currentSlide=swiper.activeIndex;var columnCount=swiper.slidesPerViewDynamic();for(var i=currentSlide;i<currentSlide+columnCount;i++){var slide=swiper.slides[i];if(!slide)break;var captionBoxNode=$(slide).find(selectors.captionTitleContainer);if(captionBoxNode.length>0){bottom=Math.max(bottom,captionBoxNode.outerHeight())}}var dotsContainer=$slider.find(selectors.swiperPagination);dotsContainer.css('bottom',navigationDotsBottomOffset+bottom)};function initializeShinyBox(el,noTitleCaptionBox){requestAnimationFrame(function(){el.shinybox({loopAtEnd:true,verticalSwipeDisable:true,beforeOpen:function(){if(isMobile){$('.shinybox-overlay').addClass('mobile-view')}else{$('.shinybox-overlay').removeClass('mobile-view')}},noTitleCaptionBox:noTitleCaptionBox,sort:function(a,b){if($(a).length){return $(a).data('dom-index')-$(b).data('dom-index')}else{return 1}}})})};function stopAutoplay(swiper){if(swiper.autoplay&&swiper.autoplay.running){swiper.autoplay.stop()}};function startAutoplay(swiper){if(swiper.params&&swiper.params.autoplay&&swiper.params.autoplay.enabled&&swiper.autoplay){swiper.autoplay.start()}};function updateSlideTabindex(swiper){if(swiper.params){const {slidesPerView}=swiper.params;$(swiper.slides).each(function(index,slide){if(index>=swiper.activeIndex&&index<swiper.activeIndex+slidesPerView){$(slide).find('a').attr('tabindex','0')}else{$(slide).find('a').attr('tabindex','-1')}})}};function initKeyboardNavigation(swiper){function play(){startAutoplay(swiper)}function pause(){if(!focusFromMouse){stopAutoplay(swiper)}}var paginationEl=$(swiper.pagination.el);paginationEl.off('focus blur');paginationEl.on('focus','.swiper-pagination-bullet, .arrow',pause);paginationEl.on('blur','.swiper-pagination-bullet, .arrow',play);var nextEl=$(swiper.navigation.nextEl);nextEl.add(swiper.navigation.prevEl).off('focus blur');nextEl.add(swiper.navigation.prevEl).on('focus',pause);nextEl.add(swiper.navigation.prevEl).on('blur',play);$(swiper.slides).each(function(index,slide){const anchor=$(slide).find('a');anchor.off('focus blur');anchor.on('focus',function(){if(!swiper.destroyed){pause();swiper.allowSlideNext=false;swiper.allowSlidePrev=false;swiper.params.loop=false}});anchor.on('blur',function(){if(!swiper.destroyed){play();swiper.allowSlideNext=true;swiper.allowSlidePrev=true;swiper.params.loop=true}})})};function checkForNavigationDotsOverflow(swiper){requestAnimationFrame(function(){if(swiper.destroyed)return;const swiperRect=swiper.el?.getBoundingClientRect();const dotsRect=swiper.pagination?.el?.getBoundingClientRect();;if(swiperRect&&dotsRect&&dotsRect.left<=swiperRect.left){const dotsContainer=swiper.pagination.el;addClass(dotsContainer,constants.overflow);const paginationInner=document.createElement('div');addClass(paginationInner,'pagination-inner');const dots=dotsContainer.querySelectorAll('.swiper-pagination-bullet');dots.forEach(function(dot){paginationInner.appendChild(dot)});dotsContainer.innerHTML='';dotsContainer.appendChild(paginationInner)}})};function moveNavigationDots(swiper){requestAnimationFrame(function(){if(swiper.el&&swiper.pagination&&swiper.pagination.el&&swiper.pagination.el.querySelector(selectors.paginationInner)){const paginationInner=swiper.pagination.el.querySelector(selectors.paginationInner);const paginationOuterRect=swiper.pagination.el.getBoundingClientRect();const paginationInnerRect=paginationInner.getBoundingClientRect();const activeDot=paginationInner.querySelector('.swiper-pagination-bullet-active');const dotRect=activeDot.getBoundingClientRect();const paginationOuterStyle=window.getComputedStyle(swiper.pagination.el);const paddingOffset=parseInt(paginationOuterStyle.paddingLeft);const dotCenterX=dotRect.left+dotRect.width/2;const distanceFromCenter=dotCenterX-paginationOuterRect.left-paginationOuterRect.width/2;const targetLeft=distanceFromCenter-paginationInner.offsetLeft+paddingOffset;const maxLeft=paginationInnerRect.width-paginationOuterRect.width+paddingOffset*2;const newLeft=Math.min(Math.max(0,targetLeft),maxLeft);const prevLeft=paginationInner.style.left;paginationInner.style.left=`-${newLeft}px`;const onTransitionEnd=function(){paginationInner.removeEventListener('transitionend',onTransitionEnd);const updatedPaginationOuterRect=swiper.pagination.el.getBoundingClientRect();const allDots=$(swiper.pagination.el).find('.swiper-pagination-bullet');allDots.each(function(_,dot){const dotRect=dot.getBoundingClientRect();if(dotRect.right>updatedPaginationOuterRect.right||dotRect.left<updatedPaginationOuterRect.left){dot.setAttribute('tabindex',-1);dot.style.opacity=0}else{dot.setAttribute('tabindex',0);dot.style.opacity=1}})};paginationInner.addEventListener('transitionend',onTransitionEnd);if(!prevLeft||prevLeft===paginationInner.style.left){onTransitionEnd()}}})};function showAllNavigationDots(swiper){if(!swiper||!swiper.pagination||!swiper.pagination.el)return;$(swiper.pagination.el).find('.swiper-pagination-bullet').each(function(_,dot){dot.style.opacity=1})};function removeLoadingOnError(swiper){requestAnimationFrame(function(){const lazyElements=[...swiper.el.querySelectorAll('[loading="lazy"]')];if(swiper.isElement){lazyElements.push(...swiper.hostEl.querySelectorAll('[loading="lazy"]'))}lazyElements.forEach(function(imageEl){if(!imageEl.complete){imageEl.addEventListener('error',function(e){swiper.onLoad(e)})}})})}function initEllipsesCode(swiper){$(swiper.el).find(selectors.captionTitleContainer).each(function(_,el){var $el=$(el);var $slide=$el.closest(selectors.slide);$slide.removeClass(constants.expanded);$el.off('click');$el.on('click',function(){$slide.toggleClass(constants.expanded);adjustNavigationDots(swiper)});requestAnimationFrame(function(){if(el.children[0]&&el.children[0].offsetHeight>40){addClass(el,constants.hasLargeText)}})})}function init(){$(selectors.swiper).each(function(_,el){var $el=$(el);$el.css('opacity',0);isMobile=$el.closest('.mobileV').length>0;const data=structuredClone($el.data('swiper'));const columnCount=data.slidesPerView;const isFullWidth=$el.data('full-width');const captionEnabled=$el.data('captionenabled');data.on={init:function(swiper){initializeShinyBox($el.find('.shinybox'),!captionEnabled);removeLoadingOnError(swiper);initKeyboardNavigation(swiper);updateSlideTabindex(swiper);initEllipsesCode(swiper);checkForNavigationDotsOverflow(swiper);moveNavigationDots(swiper);adjustNavigationDots(swiper);$el.css('opacity',1)},slideChange:function(swiper){if(isMobile&&swiper.realIndex!==swiper.previousRealIndex){swiper.slides.forEach(function(slideEl){removeClass(slideEl,constants.expanded)})}updateSlideTabindex(swiper);showAllNavigationDots(swiper);moveNavigationDots(swiper);adjustNavigationDots(swiper)}};if(isMobile){data.slidesPerView=1;data.navigation.enabled=false;$el.find('.prev-arrow, .next-arrow').hide();if($el.closest('.showIndicatorInMobile').length>0){data.pagination.enabled=true}var originalWidth=Number($el.data('original-width'));var sliderWidth=Math.min(originalWidth,$el.parent().width());const minHeight=(isFullWidth?100:0)+(captionEnabled?100:50);$el.find(selectors.slide).each(function(_,slideEl){const $slide=$(slideEl);var originalWidth=Number($slide.data('original-width'));var originalHeight=Number($slide.data('original-height'));var aspectRatio=originalWidth/(originalHeight*columnCount);var width=sliderWidth;var height=Math.max(width/aspectRatio,minHeight);var $img=$slide.find('img:first-child');$img.css('width',width);$img.css('height',height)})}if(el.swiper){el.swiper.destroy(true,true)}requestAnimationFrame(function(){new Swiper(el,data)})})};$(window).on('changed-to-mobile-view',init);$(window).on('view-chosen',init);$(window).on('mousedown',function(){focusFromMouse=true});$(window).on('keydown',function(){focusFromMouse=false})}(window.oneJQuery));